(()=>{"use strict";class t{constructor(t){this.xVelocity=0,this.width=36,this.height=19,this.x=0,this.y=t-this.height,this.speed=70,this.lastDirection=1,this.imageRight=document.getElementById("turtle"),this.imageLeft=document.getElementById("turtleLeft")}right(){this.xVelocity=1,this.lastDirection=1}left(){this.xVelocity=-1,this.lastDirection=-1}draw(t,i,e){var h=this.x+this.xVelocity*this.speed*e;h>0&&h<i-this.width&&(this.x=h),this.lastDirection>0?t.drawImage(this.imageRight,this.x,this.y,this.width,this.height):t.drawImage(this.imageLeft,this.x,this.y,this.width,this.height)}}class i{constructor(t){this.xVelocity=0,this.yVelocity=0,this.width=22,this.height=28,this.x=t.x+Math.floor(t.width/2),this.y=t.y-Math.floor(t.height/2),this.isFiring=!1,this.speed=100,this.imageUp=document.getElementById("beeUp"),this.imageLeft=document.getElementById("beeLeft"),this.imageRight=document.getElementById("bee"),this.image=this.imageRight}draw(t){this.isFiring&&(this.x=this.x+this.xVelocity*this.speed*deltaTime,this.y=this.y+this.yVelocity*this.speed*deltaTime,t.drawImage(this.image,this.x,this.y,this.width,this.height))}checkCollision(t,i,e,h){if(this.isFiring){if(this.x>i||this.x<0||this.y>e||this.y<0)return this.isFiring=!1,"gone";if(t.isHit(this.x,this.y,this.width,this.height))return this.isFiring=!1,"hit"}return 0}fire(t,i){this.isFiring=!0,this.xVelocity=t,this.yVelocity=i,this.image=1==t?this.imageRight:-1===t?this.imageLeft:this.imageUp}}class e{constructor(t,i){this.width=29,this.height=27,this.speed=20,this.x=Math.floor(Math.random()*(i-this.width)),this.y=Math.floor(Math.random()*(t-this.height)),this.color="#FF5733",this.imageRight=document.getElementById("racoonRight"),this.imageLeft=document.getElementById("racoon"),this.image=this.imageLeft}draw(t,i,e,h){var s=this.speed*h;this.x<i.x&&this.x+this.width+s<e.width?(this.x+=s,this.image=this.imageRight):this.x>i.x&&this.x-s>0&&(this.x-=this.speed*h,this.image=this.imageLeft),this.y<i.y&&this.y+this.height+s<e.height?this.y+=s:this.y>i.y&&this.y-s>0&&(this.y-=s),t.drawImage(this.image,this.x,this.y,this.width,this.height)}isHit(t,i,e,h){return t<this.x+this.width&&t+e>this.x&&i<this.y+this.height&&i+h>this.y}}class h{constructor(t,i){this.width=30,this.height=30,this.x=200,this.y=i-this.height,this.image=document.getElementById("egg"),this.time=0}checkCollision(t){return t.x+t.width>this.x&&t.x<this.x+this.width||t.x<this.x+this.width&&t.x+t.width>this.x+this.width}draw(t){t.drawImage(this.image,this.x,this.y,this.width,this.height)}}var s=document.getElementById("secret-turtle"),n=s.getContext("2d"),r=document.getElementById("background"),o=r.getContext("2d"),a=0,g=document.getElementsByClassName("score")[0],c=10,d=1,l=[],w=!1,m=localStorage.getItem("highScore")||0,y=document.getElementsByClassName("highScore")[0];y.textContent="High Score: "+String(m);let x=new Image;var u,f;x.src="background.jpg",x.onload=()=>{o.drawImage(x,0,0,window.innerWidth-130,window.innerHeight-300)},u=window.innerHeight,f=window.innerWidth,u-=300,f-=130,s.width=f,r.width=f,s.height=u,r.height=u;var p=0,E=0,I=!1,k=new t(s.height),C=[],S=[new e(s.height,s.width,a)];function V(){n.clearRect(0,0,s.width,s.height),k.draw(n,window.innerWidth,E),S.forEach((t=>t.draw(n,k,s,E))),C.forEach((t=>t.draw(n,E))),l.forEach((t=>t.draw(n))),S.forEach((function(t){k.x<t.x+t.width&&k.x+k.width>t.x&&k.y<t.y+t.height&&k.y+k.height>t.y&&(I=!0)})),l.forEach((function(t,i){t.checkCollision(k)&&(w=!0,l.splice(i,1),d=0)})),C.forEach((function(t,i){S.forEach((function(e,h){switch(t.checkCollision(e,s.width,s.height)){case"hit":a+=1,C.splice(i,1),S.splice(h,1),a>m&&(m=a,y.textContent="High Score: "+String(m),localStorage.setItem("highScore",m));break;case"gone":C.splice(i,1)}}))})),function(){Math.floor(a/10)>0&&l.length<d&&l.push(new h(s.width,s.height));var t=Math.floor(a/5),i=t<c?t:c;for(let t=S.length;t<i+1;t++)S.push(new e(s.height,s.width,a))}(),g.textContent="Score: "+String(a)}document.addEventListener("keydown",(function(h){switch(h.keyCode){case 37:k.xVelocity>-1&&k.left();break;case 38:if(w){var n=new i(k),r=new i(k),o=new i(k);C.push(n),C.push(r),C.push(o),n.fire(-1,0),r.fire(1,0),o.fire(0,-1)}else{var c=new i(k);C.push(c),c.fire(0,-1)}break;case 39:k.xVelocity<1&&k.right();break;case 70:if(w){n=new i(k),r=new i(k),o=new i(k);C.push(n),C.push(r),C.push(o),n.fire(-1,0),r.fire(1,0),o.fire(0,-1)}else{c=new i(k);C.push(c),c.fire(k.lastDirection,0)}break;case 82:I=!1,a=0,g.textContent="Score: "+String(a),k=new t(s.height),w=!1,C=[],l=[],d=1,S=[new e(s.height,s.width,a)];break;case 80:I=!I}})),document.addEventListener("keyup",(function(t){switch(t.keyCode){case 37:case 39:k.xVelocity=0}})),function t(i){if(I)return requestAnimationFrame(t);!function(t){E=(t-p)/100,p=t}(i),V(),requestAnimationFrame(t)}(1)})();